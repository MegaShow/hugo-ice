{{ define "main" }}
  {{ $hasToc := ge (len .TableOfContents) 100 }}
  <main
    class="container container-single {{ if not $hasToc }}container-single-without-toc{{- end -}}"
  >
    <section class="box main-section">
      <div class="article-header">
        <h1 class="article-title">{{ .Title }}</h1>
        <div class="article-meta">
          <label>发布于</label>
          <time>{{ .Date.Format "2006-01-02" }}</time>
        </div>
      </div>
      <article class="article">
        {{/* 通过正则给标题添加上锚点 */}}
        {{ .Content | replaceRE "(<h[1-6] id=\"(.+)\".*>)(.*)(</h[1-6]>)" `${1}${3}<a class="header-anchor" href="#${2}">#</a>${4}` | safeHTML }}
      </article>
    </section>
    {{ if $hasToc }}
      <aside class="box sidebar">
        {{ .TableOfContents }}
      </aside>
    {{ end }}
  </main>
{{ end }}
