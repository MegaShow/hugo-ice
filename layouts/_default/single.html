{{ define "main" }}
  <main class="container container-single">
    <section class="main-section">
      {{/* 文章头部内容 */}}
      <div class="article-header">
        <h1 class="article-title">{{ .Title }}</h1>
        <div class="article-meta">
          <div class="article-meta-item">
            {{ partial "icon" "calender" }}
            <span>发布于</span>
            <time>{{ .Date.Format "2006-01-02" }}</time>
          </div>
          {{ if ne (.Date.Format "2006-01-02") (.Lastmod.Format "2006-01-02") }}
            <div class="article-meta-item">
              {{ partial "icon" "calender" }}
              <span>更新于</span>
              <time>{{ .Lastmod.Format "2006-01-02" }}</time>
            </div>
          {{ end }}
          <div class="article-meta-item">
            {{ partial "icon" "time" }}
            <span>{{ .WordCount }}字</span>
            <span>&</span>
            <span>{{ .ReadingTime }}分钟</span>
          </div>
        </div>
      </div>

      {{/* 文章正文 */}}
      <article class="article">
        {{/* 通过正则给标题添加上锚点 */}}
        {{ .Content | replaceRE "(<h[1-6] id=\"(.+)\".*>)(.*)(</h[1-6]>)" "${1}${3}<a class=\"header-anchor\" href=\"#${2}\">#</a>${4}" | safeHTML }}
      </article>
    </section>

    {{ $hasToc := ge (len .TableOfContents) 100 }}
    {{ if $hasToc }}
      <aside class="sidebar">
        {{ .TableOfContents }}
      </aside>
    {{ end }}
  </main>
{{ end }}
